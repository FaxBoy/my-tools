
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>é‡‘é¢æœ€å¤§åŒ–è´­ä¹°è®¡ç®—å™¨</title>
  <link rel="stylesheet" href="../assets/style.css">
  <style>
    input, button {margin-top: 6px;}
    .result {margin-top: 20px; background: #fff; border-radius: 8px; padding: 16px;}
  </style>
</head>
<body>
  <header><h2>ğŸ’µ é‡‘é¢æœ€å¤§åŒ–è´­ä¹°è®¡ç®—å™¨</h2></header>
  <main>
    <p>è¾“å…¥é‡‘é¢å’Œå•†å“ä»·æ ¼ï¼ˆå¯è¾“å…¥ç®—å¼ï¼Œå¦‚ <code>100/2 + 50</code>ï¼‰</p>
    <div>
      <label>æ€»é‡‘é¢ï¼š</label><br>
      <input id="total" type="text" placeholder="å¦‚ 100*3">
      <br><label>å•†å“Aå•ä»·ï¼š</label><br>
      <input id="priceA" type="text" placeholder="å¦‚ 9.9*2">
      <br><label>å•†å“Bå•ä»·ï¼š</label><br>
      <input id="priceB" type="text" placeholder="å¦‚ 15+3">
      <br><label>å•†å“Cå•ä»·ï¼š</label><br>
      <input id="priceC" type="text" placeholder="å¦‚ 8.5/2">
      <br><button onclick="calculate()">è®¡ç®—</button>
    </div>
    <div class="result" id="result"></div>
  </main>
  <footer><a href="../index.html">â† è¿”å›é¦–é¡µ</a></footer>
  <script>
    function safeEval(expr) {
      if (!/^[0-9+\-*/().\s]+$/.test(expr)) return NaN;
      try { return Function('"use strict";return(' + expr + ')')(); } catch { return NaN; }
    }
    function calculate() {
      const total = safeEval(document.getElementById('total').value);
      const priceA = safeEval(document.getElementById('priceA').value);
      const priceB = safeEval(document.getElementById('priceB').value);
      const priceC = safeEval(document.getElementById('priceC').value);
      const result = document.getElementById('result');
      const prices = [priceA, priceB, priceC].filter(p => p > 0);
      if (prices.length === 0 || isNaN(total)) return result.innerHTML = "<p>âŒ è¾“å…¥æœ‰è¯¯</p>";
      let best = {a:0,b:0,c:0,spent:0};
      const maxA = Math.floor(total / (priceA || Infinity));
      for (let a = 0; a <= (isNaN(maxA)?0:maxA); a++) {
        const remainA = total - a*(priceA||0);
        const maxB = Math.floor(remainA / (priceB || Infinity));
        for (let b = 0; b <= (isNaN(maxB)?0:maxB); b++) {
          const remainB = remainA - b*(priceB||0);
          const c = priceC > 0 ? Math.floor(remainB / priceC) : 0;
          const spent = a*(priceA||0) + b*(priceB||0) + c*(priceC||0);
          if (spent > best.spent && spent <= total)
            best = {a,b,c,spent};
        }
      }
      const left = (total - best.spent).toFixed(2);
      result.innerHTML = `
        <h3>âœ… å¯ç”¨é‡‘é¢æœ€å¤§åŒ–ä½¿ç”¨ï¼šï¿¥${best.spent.toFixed(2)}ï¼ˆå‰©ä½™ï¿¥${left}ï¼‰</h3>
        <p>å•†å“Aï¼š${best.a} ä»¶ Ã— ï¿¥${priceA || 0} = ï¿¥${(best.a*(priceA||0)).toFixed(2)}</p>
        <p>å•†å“Bï¼š${best.b} ä»¶ Ã— ï¿¥${priceB || 0} = ï¿¥${(best.b*(priceB||0)).toFixed(2)}</p>
        <p>å•†å“Cï¼š${best.c} ä»¶ Ã— ï¿¥${priceC || 0} = ï¿¥${(best.c*(priceC||0)).toFixed(2)}</p>`;
    }
  </script>
</body>
</html>
